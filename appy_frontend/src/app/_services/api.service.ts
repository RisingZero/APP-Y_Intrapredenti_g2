import { Injectable } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';

import { DailyChallengeCard, User } from 'src/_models';
import { environment } from 'src/environments/environment';

@Injectable({
  providedIn: 'root'
})
export class ApiService {

  constructor(
    private sanitizer: DomSanitizer
  ) { }

  private url(path: string): string {
    return `http://${environment.apiHost}${path}`;
  }

  getUser(username: string): User {
    let name = username.split('.')[0];
    let surname = username.split('.')[1];

    name = name.charAt(0).toUpperCase() + name.slice(1);
    surname = surname.charAt(0).toUpperCase() + surname.slice(1);
    
    return {
      name,
      surname,
      username,
      level: 3,
      expProgress: 50,
      sfideProgress: 66,
      challProgress: 25,
      boostTimeRemaining: 20,
      boostTimeRemainingHuman: '7 ore rimaste',
      experience: 7000
    };
  }

  getDailyChallenges(): DailyChallengeCard[] {
    const challs: DailyChallengeCard[] = [{
        id: 'daily-survey',
        title: 'Rispondi al questionario',
        description: 'Rispondi al questionario del giorno e ricevi una ricompensa',
        icon: this.sanitizer.bypassSecurityTrustHtml('<svg width="60" height="66" viewBox="0 0 71 66" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M70.8567 33.7236C70.8799 26.9537 70.9 20.1785 70.8567 13.4065C70.8069 6.23355 65.3681 0.576451 58.2041 0.444227C50.7725 0.307771 20.7604 0.326811 13.1998 0.460093C6.59848 0.576451 1.02107 6.16479 0.952315 12.758C0.839137 22.9816 0.900486 33.2063 0.952315 43.4341C0.958661 44.6358 1.22203 45.8872 1.61551 47.0306C3.48664 52.4614 8.34268 55.7998 14.3083 55.8103C24.7629 55.8251 35.2178 55.8216 45.6732 55.7998C46.3554 55.7998 46.8367 55.9764 47.3264 56.4683C50.0025 59.1911 52.7208 61.8694 55.4074 64.5826C56.4282 65.614 57.5747 66.1535 58.9879 65.5622C60.382 64.9772 60.8844 63.7999 60.8812 62.3528C60.8812 60.4932 60.9531 58.6304 60.8516 56.7772C60.7945 55.7194 61.1784 55.3565 62.1473 54.998C67.0827 53.1701 70.1173 49.6159 70.6589 44.3682C71.0185 40.8489 70.845 37.2725 70.8567 33.7236ZM48.6951 22.989C48.5227 23.19 48.3334 23.3772 48.1461 23.5655C43.7389 27.9765 39.3317 32.3869 34.9245 36.7965C33.1105 38.6106 31.5778 38.6201 29.786 36.8314C27.5764 34.629 25.3594 32.433 23.1795 30.2117C22.1714 29.1814 22.016 27.9385 22.6242 26.7368C23.1964 25.605 24.3916 24.9058 25.6757 25.1935C26.3728 25.35 27.0878 25.7753 27.6177 26.2693C29.2159 27.7608 30.7274 29.3453 32.4938 31.1161C32.7234 30.767 32.8788 30.4158 33.1285 30.1641C36.7523 26.5175 40.3838 22.8776 44.0231 19.2444C44.809 18.4543 45.6848 17.9106 46.8409 18.0735C47.979 18.2342 48.821 18.852 49.2335 19.9309C49.6566 21.03 49.4799 22.0751 48.6951 22.989Z" fill="white"/></svg>'),
        color: '#00b79f',
        completed: false
      }, {
        id: 'daily-survey',
        title: 'Chatta con qualcuno',
        description: 'Chatta con qualcuno e ricevi una ricompensa',
        icon: this.sanitizer.bypassSecurityTrustHtml('<svg width="60" height="60" viewBox="0 0 70 71" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M69.049 26.8803C64.0619 5.40911 39.9488 -6.16124 20.0646 3.36351C1.94463 12.0627 -5.19817 33.5583 4.05444 51.3847C4.26627 51.8296 4.31811 52.334 4.20121 52.8127C3.18299 56.4819 2.08222 60.1298 1.06706 63.799C0.851275 64.5278 0.800099 65.2954 0.917236 66.0464C1.36366 68.41 3.66917 69.7585 6.02054 69.0766C9.72444 68.0023 13.4253 66.8954 17.1231 65.7559C17.3944 65.6605 17.6834 65.6255 17.9696 65.6535C18.2559 65.6815 18.5326 65.7718 18.7803 65.918C23.8653 68.6699 29.3141 70.0061 35.7261 70.0734C36.5853 70.0061 38.0836 69.9267 39.5727 69.7676C40.6332 69.6463 41.6858 69.4635 42.7252 69.2203C61.8817 64.7561 73.5071 46.0613 69.049 26.8803ZM21.9359 40.5941C21.3935 40.5974 20.8558 40.4922 20.3546 40.2849C19.8533 40.0775 19.3986 39.7721 19.0169 39.3866C18.6353 39.0011 18.3346 38.5432 18.1323 38.0399C17.9301 37.5366 17.8304 36.9979 17.8391 36.4556C17.8479 35.9132 17.9649 35.378 18.1833 34.8815C18.4017 34.385 18.7171 33.937 19.111 33.5641C19.5048 33.1911 19.9692 32.9005 20.4769 32.7095C20.9846 32.5184 21.5253 32.4307 22.0674 32.4514C23.1312 32.4922 24.1367 32.9478 24.8687 33.7208C25.6007 34.4938 26.001 35.5226 25.9838 36.5871C25.9666 37.6515 25.5333 38.6669 24.7768 39.4158C24.0202 40.1648 23.0004 40.5877 21.9359 40.5941ZM35.0229 40.5941C34.219 40.5965 33.4324 40.3607 32.7623 39.9166C32.0923 39.4725 31.5688 38.8399 31.2578 38.0986C30.9468 37.3573 30.8624 36.5405 31.0151 35.7512C31.1678 34.962 31.5508 34.2357 32.1158 33.6638C32.6808 33.092 33.4025 32.7003 34.1899 32.5382C34.9773 32.376 35.795 32.4507 36.54 32.7527C37.285 33.0548 37.9238 33.5707 38.3759 34.2354C38.828 34.9001 39.0732 35.6838 39.0804 36.4876C39.0789 37.5675 38.6524 38.6034 37.8931 39.3713C37.1337 40.1392 36.1027 40.5774 35.0229 40.591V40.5941ZM47.9906 40.5941C47.1889 40.5874 46.407 40.3442 45.7429 39.8951C45.0787 39.4459 44.562 38.8108 44.2573 38.0692C43.9526 37.3276 43.8736 36.5126 44.0301 35.7263C44.1866 34.9399 44.5717 34.2173 45.1372 33.6489C45.7026 33.0805 46.4232 32.6917 47.2087 32.5311C47.9942 32.3705 48.8096 32.4453 49.5528 32.7461C50.2959 33.0469 50.9338 33.5604 51.3864 34.2221C51.839 34.8839 52.0862 35.6645 52.0971 36.4662C52.1056 37.0076 52.0059 37.5452 51.8038 38.0475C51.6017 38.5497 51.3013 39.0066 50.9202 39.3911C50.539 39.7757 50.0849 40.0802 49.5844 40.2868C49.084 40.4933 48.5473 40.5978 48.0059 40.5941H47.9906Z" fill="white"/></svg>'),
        color: '#beb3ff',
        completed: false
      }, {
        id: 'daily-survey',
        title: 'Invita un amico',
        description: 'Invita un amico e ricevi una ricompensa',
        icon: this.sanitizer.bypassSecurityTrustHtml('<svg width="60" height="71" viewBox="0 0 63 71" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M30.8539 71.0004C23.0507 70.9347 15.9038 68.6174 9.59778 63.8786C5.88554 61.1025 2.74411 57.6228 0.34891 53.634C-0.00368661 53.0286 -0.136588 52.4205 0.175324 51.7576C3.30801 45.1261 8.37997 40.8748 15.4563 39.0752C15.9988 38.9355 16.5602 38.8588 17.1108 38.741C18.1957 38.5054 19.1369 38.8287 20.0292 39.4669C23.4761 41.9462 27.6533 43.1725 31.8792 42.9457C35.2098 42.806 38.4158 41.9924 41.1009 40.0038C43.0999 38.5191 45.0174 38.6068 47.1547 39.2067C53.1841 40.9022 57.7326 44.5316 60.9412 49.9196C62.3381 52.2589 62.3896 52.3109 60.906 54.5763C57.2905 60.0738 52.5956 64.3716 46.7126 67.2998C41.7773 69.7452 36.3512 71.0114 30.8539 71.0004Z" fill="white"/><path d="M30.9814 36.3604C21.1032 36.3357 12.9555 28.0743 13.0152 18.1393C13.0532 8.13849 21.2144 -0.0626408 31.0546 0.000360575C40.9408 0.0633619 49.0017 8.23163 48.9963 18.1804C48.9909 28.1291 40.8351 36.385 30.9814 36.3604Z" fill="white"/></svg>'),
        color: '#4747f9',
        completed: false
      }
    ];

    return challs;
  }
  
}
