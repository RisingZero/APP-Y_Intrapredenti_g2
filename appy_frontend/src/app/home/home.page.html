<ion-content [fullscreen]="true" scroll-y="false">
  <div id="container">

    <div class="header-box">
      <div class="welcome-box">
        <div id="welcome-message"><div>Ciao</div><div [style.color]="'var(--ion-color-primary)'">{{user.name}}</div></div>
        <div id="quick-survey-btn" (click)="onSurveyClick()">
          <ion-icon src="../../assets/svgs/daily-feedback-icon.svg"></ion-icon>
        </div>
      </div>       
    </div>
    <div class="header-bottom-curved">
      <svg width="500" height="170" viewBox="0 0 500 170" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M500 0V101.931C497.616 102.132 495.493 102.264 493.389 102.558C482.967 103.986 473.405 107.931 464.314 112.996C454.962 118.205 445.828 123.801 436.517 129.085C428.739 133.499 420.728 137.426 411.624 138.215C402.598 139 394.514 136.936 388.61 129.537C385.984 126.243 383.577 122.779 381.405 119.169C372.414 104.228 362.777 89.7711 351.406 76.4895C338.575 61.5027 323.47 49.6225 305.315 41.7358C284.153 32.5417 262.015 29.3248 239.086 30.8881C222.274 32.0336 206.196 36.0522 191.159 43.6617C162.789 58.0123 142.217 80.0878 128.749 108.652C124.18 118.342 121.166 128.767 117.457 138.863C114.489 146.949 110.886 154.671 104.866 161.024C96.6315 169.716 82.5481 173.973 70.151 164.845C66.16 161.907 62.3835 158.629 58.7801 155.22C51.5509 148.382 44.6867 141.153 37.3395 134.449C30.0299 127.783 21.7217 122.601 11.9957 120.053C8.10124 119.018 4.16166 118.306 0 118.564V0H500Z" fill="white"/>
      </svg> 
    </div>

    <div class="user-progress-box">
      <div class="user-progress-circle">
        <p>{{user.level}}</p>
      </div>
      <svg width="217" height="218" viewBox="0 0 217 218" fill="none" xmlns="http://www.w3.org/2000/svg">
        <!-- top-left track -->
        <path opacity="0.1" (click)="openModal('exp')" d="M21.5727 149.209C15.6671 136.484 12.6174 122.622 12.6376 108.594C12.6376 65.287 41.1633 28.6401 80.451 16.4214" stroke="white" stroke-width="24.9739" stroke-linecap="round" stroke-linejoin="round"/>
        <!-- bottom track -->
        <path opacity="0.1" (click)="openModal('sfide')" d="M203.462 129.186C194.027 172.594 155.364 205.107 109.148 205.107C89.9566 205.144 71.1939 199.432 55.2784 188.707" stroke="white" stroke-width="24.9739" stroke-linecap="round" stroke-linejoin="round"/>
        <!-- top-right track -->
        <path opacity="0.1" (click)="openModal('chall')" d="M124.881 13.3594C144.171 16.5563 162.037 25.5309 176.118 39.0972C190.198 52.6634 199.831 70.1829 203.744 89.3402" stroke="white" stroke-width="24.9739" stroke-linecap="round" stroke-linejoin="round"/>
        <!-- top-left bar -->
        <path #expProgress (click)="openModal('exp')" d="M21.5727 149.209C15.6671 136.484 12.6174 122.622 12.6376 108.594C12.6376 65.287 41.1633 28.6401 80.451 16.4214" stroke="#26B5A0" stroke-width="24.9739" stroke-miterlimit="10" stroke-linecap="round" stroke-dashoffset="0" stroke-dasharray="1,2000" />
        <!-- bottom bar -->
        <path #sfideProgress (click)="openModal('sfide')" d="M203.462 129.186C194.027 172.594 155.364 205.107 109.148 205.107C89.9566 205.144 71.1939 199.432 55.2784 188.707" stroke="#BDB4FF" stroke-width="24.9739" stroke-miterlimit="10" stroke-linecap="round" stroke-dashoffset="0" stroke-dasharray="1,2000" />
        <!-- top-right bar -->
        <path #challProgress (click)="openModal('chall')" d="M124.881 13.3594C144.171 16.5563 162.037 25.5309 176.118 39.0972C190.198 52.6634 199.831 70.1829 203.744 89.3402" stroke="#FFB985" stroke-width="24.9739" stroke-miterlimit="10" stroke-linecap="round" stroke-dashoffset="0" stroke-dasharray="1,2000"/>
      </svg>        
    </div>

    <div class="boost-box">
      <div class="boost-progress-track">
        <div class="boost-progress-human">{{user.boostTimeRemainingHuman}}</div>
        <div #boostProgressBar class="boost-progress-bar"></div>
        <div class="boost-btn" (click)="onBoostClick()">
          <ion-icon src="../../assets/svgs/star-icon.svg"></ion-icon>
        </div>
      </div>
    </div>

    <div class="challenge-carousel-box">
      <div class="challenge-carousel-item" *ngFor="let challenge of dailyChallengeCards">
          <div class="chall-title">
            {{challenge.title}}
          </div>

          <ion-button color="primary" shape="round" size="small">
            {{(challenge.completed) ? 'COMPLETATA' : 'INIZIA'}}
          </ion-button>

          <div>
            <svg class="challenge-icon-bg" width="100" height="139" viewBox="0 0 123 139" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M56.5 1.88675C59.594 0.100422 63.406 0.100423 66.5 1.88675L117.555 31.3633C120.649 33.1496 122.555 36.4508 122.555 40.0235V98.9765C122.555 102.549 120.649 105.85 117.555 107.637L66.5 137.113C63.406 138.9 59.594 138.9 56.5 137.113L5.44521 107.637C2.3512 105.85 0.44521 102.549 0.44521 98.9765V40.0235C0.44521 36.4508 2.3512 33.1496 5.44521 31.3632L56.5 1.88675Z" [attr.fill]="challenge.color"/>
            </svg>
            <div class="challenge-icon" [innerHTML]="challenge.icon"></div>
          </div>
      </div>
      <div class="challenge-carousel-item">
        <ion-button color="primary" shape="round" size="large">
          TUTTE LE SFIDE
        </ion-button>
      </div>
    </div>

    <app-overlay-box (onClickClose)="closeModal()" *ngIf="isModalProgressOpen">
      <h1 class="progress-modal-title">{{modalProgressTitle}}</h1>
      <div class="progress-modal-circle-box">
        <svg width="245" height="245" viewBox="0 0 245 245" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="122.5" cy="122.5" r="107.5" [style.stroke]="modalProgressColor" stroke-opacity="0.2" stroke-width="30"/>
          <circle #progressOverlayMeter id="progress-modal-circle-meter"  cx="122.5" cy="122.5" r="107.5" [style.stroke]="modalProgressColor" [style.strokeDasharray]="modalProgressCircleDraw" stroke-linecap="round" stroke-width="30" />
        </svg>  
      </div>
    </app-overlay-box>

  </div>
</ion-content>
